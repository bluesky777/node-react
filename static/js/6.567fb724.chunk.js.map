{"version":3,"sources":["services/NoticiasServices.js","components/CardNew.jsx","components/Home.jsx","data/api.js"],"names":["NoticiasServices","api","create","get","query","page","limit","find","noticia_id","remove","CardNew","noticia","Card","sx","maxWidth","CardActionArea","CardHeader","avatar","Avatar","bgcolor","red","aria-label","title","titulo","subheader","date","CardMedia","component","height","image","imagen","alt","CardContent","style","overflow","Typography","variant","descripcion","CardActions","likes","Home","navigation","useNavigate","useState","noticias","setNoticias","setQuery","setPage","clickRemoveAll","useSelector","state","AuthReducer","user","e","a","request","window","location","reload","fetchPage","useCallback","console","log","res","data","_noticias","concat","docs","length","alert","useEffect","then","Fragment","CssBaseline","Container","fixed","Paper","square","pb","TextField","marginTop","onChange","target","value","placeholder","fullWidth","required","dataLength","next","hasMore","loader","endMessage","textAlign","Grid","container","spacing","map","item","xs","sm","md","lg","_id","AppBar","position","color","top","bottom","Toolbar","IconButton","Box","flexGrow","onClick","serverUrl","hostname","axios","baseURL","interceptors","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response"],"mappings":"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","file":"static/js/6.567fb724.chunk.js","sourcesContent":["import { AxiosInstance } from \"axios\"\n\nexport const NoticiasServices = (api: AxiosInstance) => {\n    return {\n        create: () => api.get(`/noticias/create`),\n        get: (query, page, limit) => api.get(`/noticias?query=${query}&page=${page}&limit=${limit}`),\n        find: (noticia_id: number) => api.get('/noticias/find', { noticia_id }),\n        remove: () => api.get('/noticias/remove'),\n    }\n}","import { Card, CardActionArea, CardMedia, \n    CardActions, CardContent, Typography,\n    CardHeader,\n    Avatar,\n    IconButton, } \n    from '@material-ui/core';\nimport { red } from '@mui/material/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { Box } from '@mui/system';\n\nconst CardNew = ({noticia}) => {\n    return (\n        <Card sx={{ maxWidth: 200 }}>\n            <CardActionArea>\n                <CardHeader\n                    avatar={\n                        <Avatar sx={{ bgcolor: red[500] }} aria-label=\"recipe\">\n                            R\n                        </Avatar>\n                    }\n                    title={noticia.titulo}\n                    subheader={noticia.date}\n                />\n                <CardMedia\n                    component=\"img\"\n                    height=\"140\"\n                    image={noticia.imagen}\n                    alt={noticia.imagen}\n                />\n                <CardContent>\n                    <Box sx={{ height: '35px' }} style={{overflow: 'hidden'}}>\n                        <Typography variant=\"body2\">\n                            {noticia.descripcion}\n                        </Typography>\n                    </Box>\n                </CardContent>\n            </CardActionArea>\n            <CardActions>\n                <IconButton aria-label=\"add to favorites\">\n                    <FavoriteIcon />\n                </IconButton>\n                <Box sx={{ height: '35px' }} style={{overflow: 'hidden'}}>\n                    <Typography variant=\"body2\">\n                        {noticia.likes}\n                    </Typography>\n                </Box>\n                \n            </CardActions>\n        </Card>\n    )\n}\nexport default CardNew","import { useNavigate } from \"react-router\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport CssBaseline from '@mui/material/CssBaseline';\nimport Toolbar from '@mui/material/Toolbar';\nimport IconButton from '@mui/material/IconButton';\nimport Paper from '@mui/material/Paper';\nimport { TextField } from '@mui/material';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport LockIcon from '@material-ui/icons/Lock';\nimport request from '../data/api';\nimport { useSelector } from 'react-redux';\nimport { NoticiasServices } from \"../services/NoticiasServices\";\nimport CardNew from \"./CardNew\";\nimport { Container } from \"@material-ui/core\";\nimport Grid from '@mui/material/Grid';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\n\n\nexport default function Home() {\n\n  const navigation = useNavigate();\n  const [noticias, setNoticias] = useState([]);\n  const [query, setQuery] = useState('');\n  const [page, setPage] = useState(1);\n\n  const user = useSelector(state => state.AuthReducer.user)\n\n  const clickLogOut = () => {\n    navigation('/login');\n  }\n\n  const handleChange = (e) => {\n    setQuery(e.target.value);\n  }\n\n  const clickRemoveAll = async (e) => {\n    await NoticiasServices(request).remove(query, 0, 3);\n    window.location.reload(false);\n  }\n\n  const traerDatos = useCallback(\n    async () => {\n      //if (!user) return\n      console.log({ query })\n      let res = await NoticiasServices(request).get(query, page, 3);\n      res = res.data.noticias;\n\n      const _noticias = noticias.concat(res.docs)\n\n      if (_noticias.length == 0 && query.length == 0) {\n        await NoticiasServices(request).create();\n        alert('Hemos creado noticias')\n        window.location.reload(false);\n      }\n\n      // const datosNoticias = _noticias.map((noticia) => {\n      //   return { ...noticia, value: noticia.id, label: noticia.nombre }\n      // })\n      setNoticias(_noticias);\n    },\n    [page],\n  )\n\n  const fetchPage = async () => {\n    const nextPage = page + 1\n    setPage(page + 1)\n  }\n\n  useEffect(() => {\n    console.log({ query })\n    NoticiasServices(request).get(query, 1, 3)\n      .then((res) => {\n        setNoticias(res.data.noticias.docs);\n        setPage(1)\n      });\n\n  }, [query]);\n\n\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <Container fixed>\n        <Paper square sx={{ pb: '50px' }}>\n          <TextField style={{ marginTop: '20px' }} onChange={handleChange} placeholder='Enter username' fullWidth required variant=\"standard\" />\n          <InfiniteScroll\n            dataLength={noticias.length} //This is important field to render the next data\n            next={fetchPage}\n            hasMore={true}\n            loader={<h4>Cargando...</h4>}\n            endMessage={\n              <p style={{ textAlign: 'center' }}>\n                <b>No hay m√°s noticias</b>\n              </p>\n            }\n          >\n            <Grid container spacing={4}>\n\n\n              {noticias.map((noticia) => (\n                <Grid key={noticia._id} item xs={12} sm={6} md={4} lg={3}>\n                  <CardNew noticia={noticia} />\n                </Grid>\n              ))}\n\n\n\n\n            </Grid></InfiniteScroll>\n\n        </Paper>\n        <AppBar position=\"fixed\" color=\"primary\" sx={{ top: 'auto', bottom: 0 }}>\n          <Toolbar>\n            <IconButton color=\"inherit\" aria-label=\"open drawer\">\n              <MenuIcon />\n            </IconButton>\n            <Box sx={{ flexGrow: 1 }} />\n            <IconButton color=\"inherit\" onClick={clickRemoveAll}>\n              <DeleteForeverIcon />\n            </IconButton>\n            <IconButton onClick={clickLogOut} color=\"inherit\">\n              <LockIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n      </Container>\n    </React.Fragment>\n  );\n}\n","import axios from \"axios\";\n\nconst localServer = \"http://localhost:4000/api\";\nconst globalServer = \"https://audit.micolevirtual.com/audit7-laravel/api\";\n// eslint-disable-next-line no-restricted-globals\nconst serverUrl =\n  window.location.hostname === \"localhost\" ? localServer : globalServer;\n\nconst request = axios.create({\n  baseURL: serverUrl,\n});\n\nrequest.interceptors.request.use(\n  function (config) {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      config.headers.Authorization = \"Bearer \" + token;\n    }\n\n    return config;\n  },\n  function (error) {\n    // Do something with request error\n    return Promise.reject(error);\n  }\n);\n\n// Add a response interceptor\nrequest.interceptors.response.use(\n  function (response) {\n    // console.log(response);\n    return response;\n  },\n  function (error) {\n    // Do something with response error\n    return Promise.reject(error);\n  }\n);\n\nexport default request;\n"],"sourceRoot":""}